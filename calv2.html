<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
body {
    background-color: black;
    margin: 0;
    padding: 0;
}

svg {
    /*    width: 1024px;
    height: 768px;*/
}

.node {
    stroke: none;
    fill: white;
    opacity: .1;
    transition: opacity 0.8s linear;
}

.node.is-inside {
    /*fill: red;*/
    opacity: 1;
}

.node.root-node {
    fill: pink;
    opacity: 1;
}

.letter {
    stroke: white;
    visibility: hidden;
}
</style>
<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg">
    <g id="lettering">
        <polygon class="letter" points="250.11 437.51 246.59 448.02 245.6 451.52 245.09 455.01 245.57 457.11 246.83 458.57 248.59 459.44 250.65 459.73 255.79 459.73 255.79 466.25 223.95 466.25 223.95 459.73 225.44 459.73 228.4 459.38 230.91 458.03 233.12 455.31 235.24 450.83 261.76 378.9 278.55 378.9 304.12 450.95 306 455.22 308.15 457.91 310.63 459.31 313.38 459.73 315.59 459.73 315.59 466.25 275.2 466.25 275.2 459.73 279.98 459.73 281.83 459.46 283.54 458.63 284.76 457.17 285.24 455.01 284.88 452.15 284.17 449.76 279.86 437.51 250.11 437.51 250.11 437.51" />
        <polygon class="letter" points="363.05 458.1 367.62 457.77 371.71 456.96 371.71 464.91 369.12 465.92 365.29 466.91 360.36 467.65 354.39 467.95 346.92 466.97 341.25 463.68 337.66 457.71 336.41 448.66 336.41 409.53 327.21 409.53 327.21 403.25 334.26 401.7 339.22 398.12 344.83 385.99 354.99 385.99 354.99 401.16 370.64 401.16 370.64 409.53 354.99 409.53 354.99 447.4 356.87 455.53 363.05 458.1 363.05 458.1" />
        <polygon class="letter" points="381.72 615.54 385.86 615.15 389.87 613.58 392.94 610.16 394.18 604.19 394.18 353.34 392.94 347.75 389.83 344.5 385.77 343.01 381.72 342.67 379.67 342.67 379.67 333.45 420.72 333.45 420.72 604.19 421.96 610.16 425.03 613.58 429.09 615.15 433.18 615.54 435.23 615.54 435.23 624.84 379.67 624.84 379.67 615.54 381.72 615.54 381.72 615.54" />
        <polygon class="letter" points="471.86 407.08 467.95 408.06 465.41 410.81 464.07 414.99 463.68 420.28 451.28 418.43 447.13 412.1 449.13 406.36 454.57 402.48 462.57 400.3 472.34 399.61 483.6 400.71 491.61 404.27 496.42 410.69 498.03 420.4 498.03 451.58 498.42 455.76 499.64 458.42 501.91 459.83 505.38 460.25 505.86 460.25 505.86 466.76 483.09 466.76 480.52 458.33 479.45 458.33 475.63 462.61 471.8 465.62 467.23 467.38 461.23 467.95 453.67 466.76 447.58 463.08 443.49 456.87 441.99 448.06 448.83 433.3 469.41 428.11 479.45 427.75 479.45 421 479.21 415.38 478.2 410.96 475.89 408.09 471.86 407.08 471.86 407.08" />
        <polygon class="letter" points="572.54 466.25 572.54 425.98 572.03 418.96 570.36 413.79 567.31 410.6 562.74 409.49 557.66 411.05 554.41 415.2 552.64 421.23 552.11 428.43 552.11 451.79 552.73 455.91 554.5 458.33 557.27 459.46 560.95 459.73 561.31 459.73 561.31 466.25 523.73 466.25 523.73 459.73 523.97 459.73 527.79 459.46 530.81 458.3 532.81 455.73 533.53 451.31 533.53 415.11 532.9 410.99 531.11 408.57 528.33 407.43 524.69 407.16 524.33 407.16 524.33 400.65 550.02 400.65 551.63 409.37 552.23 409.37 556.14 403.88 560.53 400.77 565.46 399.4 570.92 399.1 579.41 400.47 585.77 404.71 589.74 412.03 591.12 422.69 591.12 451.07 591.63 455.64 593.15 458.24 595.72 459.44 599.36 459.73 599.72 459.73 599.72 466.25 572.54 466.25 572.54 466.25" />
        <polygon class="letter" points="646.87 458.1 651.43 457.77 655.53 456.96 655.53 464.91 652.93 465.92 649.11 466.91 644.18 467.65 638.2 467.95 630.74 466.97 625.06 463.68 621.48 457.71 620.22 448.66 620.22 409.53 611.02 409.53 611.02 403.25 618.07 401.7 623.03 398.12 628.64 385.99 638.8 385.99 638.8 401.16 654.45 401.16 654.45 409.53 638.8 409.53 638.8 447.4 640.68 455.53 646.87 458.1 646.87 458.1" />
        <polygon class="letter" points="703.61 467.95 689.9 465.68 679.95 459.11 673.92 448.57 671.88 434.32 673.92 419.2 679.83 408.33 689.36 401.79 702.23 399.61 714.18 401.49 723.2 407.08 728.88 416.28 730.85 429.06 730.85 435.33 690.76 435.33 692.11 445.91 695.33 453.2 700.35 457.44 707.13 458.81 712.99 458.06 717.86 455.97 721.68 452.81 724.4 448.89 727.68 454.87 726.25 459.86 721.83 464.01 714.33 466.88 703.61 467.95 703.61 467.95" />
        <polygon class="letter" points="215.49 612.64 226.88 611.14 235.8 607.26 242.67 601.88 247.83 596 250.01 599.15 250.82 603.51 248.85 611.23 242.28 618.7 230.08 624.33 211.3 626.55 184.76 621.94 165.9 608.88 154.64 588.57 150.88 562.29 154.72 536.34 166.12 516.11 184.98 502.97 211.13 498.28 228.67 499.86 241.09 504.17 248.51 510.61 250.99 518.59 249.58 524.61 245.4 529.43 238.53 532.63 229.14 533.78 228.2 525.12 225 517.31 219.07 511.63 209.94 509.46 195.94 512.96 186.77 523.2 181.78 539.8 180.24 562.29 182.12 584.39 188.18 600.13 199.06 609.52 215.49 612.64 215.49 612.64" />
        <polygon class="letter" points="315.5 539.58 309.91 540.99 306.28 544.92 304.36 550.89 303.81 558.45 286.1 555.8 280.17 546.75 283.03 538.56 290.8 533.01 302.23 529.9 316.18 528.92 332.27 530.5 343.71 535.57 350.58 544.75 352.88 558.62 352.88 603.16 353.44 609.14 355.19 612.94 358.43 614.94 363.38 615.54 364.06 615.54 364.06 624.84 331.55 624.84 327.88 612.81 326.34 612.81 320.88 618.91 315.42 623.22 308.89 625.74 300.31 626.55 289.51 624.84 280.81 619.59 274.96 610.72 272.83 598.13 282.6 577.05 312 569.63 326.34 569.11 326.34 559.47 326 551.45 324.55 545.13 321.26 541.03 315.5 539.58 315.5 539.58" />
        <polygon class="letter" points="551.12 540.44 547.62 540.44 544.42 540.86 541.69 542.61 539.09 546.45 536.27 553.15 510.92 624.84 487.88 624.84 459.21 548.8 457.03 544.71 454.13 542.14 450.29 540.82 445.21 540.44 445.21 531.13 499.4 531.13 499.4 540.44 492.06 540.44 487.84 541.85 486.26 545.98 486.81 550.17 487.88 553.67 499.57 586.78 503.29 597.96 505.72 608.03 506.91 603.25 508.45 597.92 509.86 593.18 510.75 590.19 522.62 555.12 524.02 550.29 524.58 545.47 522.66 541.5 517.75 540.44 512.72 540.44 512.72 531.13 551.12 531.13 551.12 540.44 551.12 540.44" />
        <polygon class="letter" points="563.15 615.54 567.29 615.15 571.3 613.58 574.37 610.16 575.61 604.19 575.61 551.11 574.37 545.52 571.25 542.27 567.2 540.78 563.15 540.44 561.1 540.44 561.1 531.13 602.15 531.13 602.15 604.19 603.39 610.16 606.46 613.58 610.51 615.15 614.61 615.54 616.66 615.54 616.66 624.84 561.1 624.84 561.1 615.54 563.15 615.54 563.15 615.54" />
        <polygon class="letter" points="573.13 502.8 574.28 497.08 577.44 493.2 582.14 490.98 587.98 490.25 593.7 490.98 598.48 493.2 601.76 497.08 603 502.8 601.76 508.43 598.48 512.36 593.7 514.66 587.98 515.43 582.14 514.66 577.44 512.36 574.28 508.43 573.13 502.8 573.13 502.8" />
        <polygon class="letter" points="699.86 624.84 699.86 567.32 699.13 557.29 696.75 549.91 692.39 545.34 685.86 543.77 678.61 545.98 673.96 551.92 671.44 560.54 670.67 570.82 670.67 604.19 671.57 610.08 674.09 613.53 678.06 615.15 683.3 615.54 683.82 615.54 683.82 624.84 630.13 624.84 630.13 615.54 630.48 615.54 635.94 615.15 640.25 613.49 643.11 609.82 644.13 603.51 644.13 551.79 643.24 545.9 640.67 542.44 636.71 540.82 631.5 540.44 630.99 540.44 630.99 531.13 667.69 531.13 669.99 543.6 670.84 543.6 676.43 535.74 682.71 531.3 689.75 529.34 697.56 528.92 709.67 530.88 718.76 536.94 724.44 547.39 726.4 562.63 726.4 603.16 727.13 609.69 729.3 613.41 732.97 615.11 738.18 615.54 738.69 615.54 738.69 624.84 699.86 624.84 699.86 624.84" />
        <polygon class="letter" points="849.12 577.65 837.56 614.43 803.55 626.55 784.68 623.52 770.48 614.43 761.51 599.15 758.4 577.65 769.96 540.95 804.06 528.92 822.88 531.9 837.04 540.95 846 556.18 849.12 577.65 849.12 577.65" />
    </g>
</svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://unpkg.com/svg-points@6.0.0/dist/svg-points.min.js"></script>
<script>
var width = 1000,
    height = 1000,
    svg = d3.select("svg").attr('width', width).attr('height', height),
    nodeRadius = 10,
    rootNode;

class polygonModel {
    constructor(type, attr, element) {
        this['type'] = type;
        this[attr] = d3.select(element).attr(attr);
    }
}

class getPolyCoordinates {
    constructor(x, y) {
        this[0] = x;
        this[1] = y;
    }
}

var lettersPolygons = [];
svg.selectAll('#lettering .letter').each(function() {
    let thisPolygon = new polygonModel('polygon', 'points', this);
    // console.log(thisPolygon);
    let thisPolygonPointsObjects = SVGPoints.toPoints(thisPolygon);
    // console.log(thisPolygonPoints);
    let thisPolygonPointsArray = [];
    thisPolygonPointsObjects.forEach(function(d) {
        // console.log(d);
        let thisCoords = [d.x, d.y];
        thisPolygonPointsArray.push(thisCoords);
    });

    lettersPolygons.push(thisPolygonPointsArray);
});
// console.log('lettersPolygons',lettersPolygons);

var nodes = [];

function addNodes(n) {
    for (var i = 0; i < n; i++) {
        // var myX = width / 4 + Math.random() * width / 2;
        // var myY = height / 4 + Math.random() * height / 2;
        // var myX = Math.random() * width;
        // var myY = Math.random() * height;
        // var myX = 25 + (width - 50) * Math.random();
        // var myY = 25 + (height - 50) * Math.random();
        var myX = width/2;
        var myY = height/2;
        nodes.push({ 'id': i, 'r': d3.randomUniform(2, nodeRadius)(), 'x': myX, 'y': myY });
    }
    rootNode = nodes[0];
    rootNode.r = nodeRadius * 2;
}

function removeNodes(n) {
    for (var i = nodes.length; i > nodes.length - n; i++) {
        if (nodes.length > 0) {
            var randomIndex = Math.floor(nodes.length * Math.random)
            nodes.splice(randomIndex, 1)
        }
    }
}

addNodes(2000);

var simulation = d3.forceSimulation(nodes)
    // .force("center", d3.forceCenter(width / 2, height / 2))
    // .force("y", d3.forceY(width/2).strength(.1))
    // .force("x", d3.forceX(height/2).strength(.1))
    .force("collide", d3.forceCollide(function(d) { return d.r + 4 }).iterations(1))
    // .force("charge", d3.forceManyBody().strength(2).distanceMin(20).distanceMax(50))
    .alpha(1)
    .alphaDecay(0.01)
    .on("tick", ticked)


var node = svg.selectAll(".node");

update();

function update() {
    var beginTime = d3.now();

    function drawGraph() {
        // Apply the general update pattern to the nodes.
        node = node.data(nodes, function(d) { return d.id; });
        node.exit().remove();
        node = node.enter().append("circle")
            .attr('class', 'node')
            .classed('root-node', function(d) { if (d.id == 0) { return true } else { return false } })
            .merge(node)
            .attr('cx', function(d) { return d.x; })
            .attr('cy', function(d) { return d.y; })
            .attr("r", function(d) { return d.r; });
    }

    drawGraph();

    // Update and restart the simulation.
    simulation.nodes(nodes);
    simulation.alpha(1).restart();
    simulation.on("end", function() {
        console.log('calc done', d3.now() - beginTime);
    })
}

function ticked() {

    // ordinary tick function for force layout
    // node.attr("cx", function(d) { return d.x; })
    //     .attr("cy", function(d) { return d.y; })

    // Bounded force layout (https://bl.ocks.org/mbostock/1129492)
    // Math.max( nodeRadius, Math.min(width - nodeRadius, d.x) )
    // the function above is useful for returning nodes positions within the svg and not outside of it.
    // the last line checks if the point is inside of at least one of the polygons iomported from illustrator to the svg and it assigns a class if this evaluates as true.
    node.attr("cx", function(d) { return d.x = Math.max(nodeRadius, Math.min(width - nodeRadius, d.x)); })
        .attr("cy", function(d) { return d.y = Math.max(nodeRadius, Math.min(height - nodeRadius, d.y)); })
        .classed('is-inside', function(d) { return checkIfInside([d.x, d.y]) })
}

svg.on("mousemove", function() {
    var p1 = d3.mouse(this);
    rootNode.x = p1[0];
    rootNode.y = p1[1];
    simulation.alphaTarget(0.3).restart(); //reheat the simulation
});

function checkIfInside(coordinates) {
    let flag = false;
    lettersPolygons.forEach(function(d) {
        let isInside = d3.polygonContains(d, coordinates);
        if (isInside) {
            flag = true;
        }
    })
    return flag;
}

// console.log(checkIfInside([314,445]))

// d3.interval(function() {
//     nodes.pop(); // Remove c.
//     links.pop(); // Remove c-a.
//     links.pop(); // Remove b-c.
//     update();
// }, 2000, d3.now());

// d3.interval(function() {
//     nodes.push(c); // Re-add c.
//     links.push({ source: b, target: c }); // Re-add b-c.
//     links.push({ source: c, target: a }); // Re-add c-a.
//     update();
// }, 2000, d3.now() + 1000);
</script>